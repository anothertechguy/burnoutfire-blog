---
import BaseLayout from '../components/Layout/BaseLayout.astro';
import PostCard from '../components/Blog/PostCard.astro';
import { getAllPosts } from '../utils/posts';
import { SITE_CONFIG } from '../config';

const posts = await getAllPosts();
const seo = {
  title: SITE_CONFIG.seo.defaultTitle,
  description: SITE_CONFIG.seo.defaultDescription,
  canonicalUrl: SITE_CONFIG.url,
};
---

<BaseLayout title={SITE_CONFIG.title} description={SITE_CONFIG.description} seo={seo}>
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
    <!-- Hero Section -->
    <div class="text-center mb-16">
      <h1 class="text-5xl md:text-6xl font-bold text-gray-900 mb-6">
        {SITE_CONFIG.title}
      </h1>
      <p class="text-xl text-gray-600 max-w-3xl mx-auto mb-8">
        {SITE_CONFIG.description}
      </p>
      <div class="max-w-2xl mx-auto">
        <p class="text-gray-700 mb-4">
          {SITE_CONFIG.brand.philosophy}
        </p>
        <div class="text-left bg-gray-50 p-6 rounded-lg">
          <h2 class="font-semibold text-gray-900 mb-3">For:</h2>
          <ul class="list-disc list-inside space-y-2 text-gray-700">
            {SITE_CONFIG.brand.targetAudience.map(audience => (
              <li>{audience}</li>
            ))}
          </ul>
        </div>
      </div>
    </div>

    <!-- Latest Posts -->
    {posts.length > 0 && (
      <section>
        <h2 class="text-3xl font-bold text-gray-900 mb-8">Latest Posts</h2>
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
          {posts.slice(0, 6).map(post => (
            <PostCard post={post} />
          ))}
        </div>
        {posts.length > 6 && (
          <div class="text-center mt-8">
            <a 
              href="/posts" 
              class="inline-block px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors"
            >
              View All Posts
            </a>
          </div>
        )}
      </section>
    )}

    {posts.length === 0 && (
      <div class="text-center py-16">
        <p class="text-gray-600 text-lg">No posts yet. Check back soon!</p>
      </div>
    )}
  </div>
</BaseLayout>
